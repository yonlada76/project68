<!--‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å-->
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô (‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="/public/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"><!-- [ADD] icons -->

  <style>
    .section-title{font-weight:700}
    .info-label{color:#6c757d;font-size:.92rem}
    .qr-box{border:1px dashed #cfe6d7;border-radius:14px;padding:18px;background:#f7fbf9}
    .card-action{border:0;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
    .card-action .icon{font-size:28px}
    .badge-type{background:#eaf8f0;color:#198754;border-radius:999px;font-weight:600}
    /* [ADD] Notification styles */
    .notif-unread{border-left:4px solid #0d6efd;background:#f6f9ff}
    .notif-time{font-size:.85rem;color:#6c757d}
    .bell-btn{position:relative}
    .bell-badge{
      position:absolute;top:-4px;right:-4px;
      background:#dc3545;color:#fff;border-radius:999px;
      font-size:.7rem;line-height:1;padding:2px 6px;min-width:18px;text-align:center
    }
  </style>
</head>
<body class="bg-light">

  <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-success shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-semibold" href="/">üèãÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏°-‡∏Ñ‡∏∑‡∏ô & ‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="nav" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto align-items-center gap-2">
        <li class="nav-item">
          <a class="nav-link active" href="/student-home">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/equipment">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏µ‡∏¨‡∏≤</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/history">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
        </li>
        <li class="nav-item">
          <form action="/staff-login" method="post" class="d-inline">
            <button 
              type="submit" 
              class="nav-link btn btn-link text-light px-2 py-2" 
              style="text-decoration: none;">
              ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
            </button>
          </form>
        </li>
        <!-- [ADD] ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
        <li class="nav-item">
          <button id="btnBell" class="btn btn-link text-light position-relative bell-btn" type="button"
                  data-bs-toggle="offcanvas" data-bs-target="#offcanvasNotif" aria-controls="offcanvasNotif">
            <i class="bi bi-bell fs-5"></i>
            <span id="bellCount" class="bell-badge d-none">0</span>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <!-- Content -->
  <main class="container my-4 my-md-5">
    <!-- Greeting -->
    <div class="row g-4 align-items-stretch">
      <div class="col-12 col-lg-8">
        <div class="card border-0 shadow p-4 p-md-5">
          <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
            <div>
              <span class="badge badge-type px-3 py-2">üë©‚Äçüéì ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</span>
              <h2 class="section-title mt-3 mb-1">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ <%= user?.full_name || '‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤' %></h2>
              <p class="text-muted mb-0">‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‚Äî ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°/‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏≥‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
            </div>
          </div>

          <!-- Info blocks -->
          <div class="row g-3 mt-4">
            <div class="col-12 col-md-6">
              <div class="p-3 border rounded-3 bg-white h-100">
                <div class="info-label mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</div>
                <div class="fw-semibold"><%= user?.email || '-' %></div>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="p-3 border rounded-3 bg-white h-100">
                <div class="info-label mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>
                <div class="fw-semibold"><%= user?.student_id || '-' %></div>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="p-3 border rounded-3 bg-white h-100">
                <div class="info-label mb-1">‡∏Ñ‡∏ì‡∏∞</div>
                <div class="fw-semibold"><%= user?.faculty || '-' %></div>
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="row g-3 mt-4">
            <div class="col-12 col-md-4">
              <a class="card card-action h-100 p-3 text-decoration-none" href="/equipment">
                <div class="icon">üèÄ</div>
                <div class="fw-bold mt-2">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</div>
                <div class="text-muted small">‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏° (‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</div>
              </a>
            </div>
            <div class="col-12 col-md-4">
              <a class="card card-action h-100 p-3 text-decoration-none" href="/history">
                <div class="icon">üóÇÔ∏è</div>
                <div class="fw-bold mt-2">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
                <div class="text-muted small">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°-‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™</div>
              </a>
            </div>

          </div>
        </div>
      </div>

      <!-- QR -->
      <div class="col-12 col-lg-4">
        <div class="card border-0 shadow p-4 h-100 d-flex">
          <h5 class="fw-bold mb-3">QR Code ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h5>
          <div class="qr-box text-center flex-grow-1 d-flex align-items-center justify-content-center">
            <% if (user?.qr_code_value) { %>
              <img class="img-fluid" style="max-width:220px"
                   src="/qrcode/<%= encodeURIComponent(user.qr_code_value) %>" alt="QR Code">
            <% } else { %>
              <div class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ QR Code</div>
            <% } %>
          </div>
          <div class="text-muted small mt-2">‡πÅ‡∏™‡∏î‡∏á QR ‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏°/‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™ (‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ 5 ‡∏ö‡∏≤‡∏ó)</div>
        </div>
      </div>
    </div>
  </main>

  <footer class="py-4 text-center text-muted small">
    ¬© <script>document.write(new Date().getFullYear())</script> Sports & Fitness Center
  </footer>

  <!-- [ADD] Offcanvas ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNotif" aria-labelledby="offcanvasNotifLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasNotifLabel" class="mb-0">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="‡∏õ‡∏¥‡∏î"></button>
    </div>
    <div class="offcanvas-body p-0">
      <div id="notifList" class="list-group list-group-flush">
        <!-- ‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ JS -->
      </div>
    </div>
    <div class="border-top p-2 d-flex gap-2 justify-content-end">
      <button id="btnMarkAll" class="btn btn-outline-secondary btn-sm">‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>
  </div>

  <!-- [ADD] Toast container ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index:1080">
    <div id="toastZone"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- [ADD] ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
  <script>
    // ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö session ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const CURRENT_USER_ID = "<%= user?.id || '' %>";

    const notifListEl = document.getElementById('notifList');
    const bellCountEl = document.getElementById('bellCount');
    const toastZone   = document.getElementById('toastZone');
    const offcanvasEl = document.getElementById('offcanvasNotif');

    let lastFetchedAt = null; // ISO string ‡πÄ‡∏ß‡∏•‡∏≤ fetch ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏Å‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏ã‡πâ‡∏≥)
    let unseenIds = new Set(); // ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏Å‡∏±‡∏ô‡∏ã‡πâ‡∏≥ toast

    // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
    function fmtTime(iso){
      try {
        const d = new Date(iso);
        return d.toLocaleString('th-TH', { hour12:false });
      } catch { return iso || ''; }
    }

    // ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    function renderItem(n){
      const a = document.createElement('a');
      a.href = "#";
      a.className = "list-group-item list-group-item-action notif-item " + (n.read_at ? "" : "notif-unread");
      a.dataset.id = n.id;

      a.innerHTML = `
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-1">${n.title || '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô'}</h6>
          <small class="notif-time">${fmtTime(n.created_at)}</small>
        </div>
        <p class="mb-1">${n.message || ''}</p>
        ${n.meta?.ref ? `<small class="text-primary">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${n.meta.ref}</small>` : ''}
      `;

      a.addEventListener('click', async (e) => {
        e.preventDefault();
        if (!n.read_at) {
          await markRead([n.id]);
          a.classList.remove('notif-unread');
          n.read_at = new Date().toISOString();
          updateBadge();
        }
        // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ detail ‡πÄ‡∏ä‡πà‡∏ô /history ‡∏Å‡πá‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
        if (n.meta?.goto) window.location.href = n.meta.goto;
      });

      return a;
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï badge ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏≠‡πà‡∏≤‡∏ô
    function updateBadge(){
      const unread = notifListEl.querySelectorAll('.notif-unread').length;
      if (unread > 0) {
        bellCountEl.textContent = unread > 99 ? '99+' : unread;
        bellCountEl.classList.remove('d-none');
      } else {
        bellCountEl.classList.add('d-none');
      }
    }

    // ‡πÅ‡∏™‡∏î‡∏á toast ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà
    function pushToast(n){
      if (unseenIds.has(n.id)) return;
      unseenIds.add(n.id);

      const wrap = document.createElement('div');
      wrap.className = 'toast align-items-center';
      wrap.role = 'alert';
      wrap.ariaLive = 'assertive';
      wrap.ariaAtomic = 'true';
      wrap.dataset.bsAutohide = "true";
      wrap.dataset.bsDelay = "6000";

      wrap.innerHTML = `
        <div class="toast-header">
          <i class="bi bi-bell me-2"></i>
          <strong class="me-auto">${n.title || '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô'}</strong>
          <small>${fmtTime(n.created_at)}</small>
          <button type="button" class="btn-close ms-2 mb-1" data-bs-dismiss="toast"></button>
        </div>
        <div class="toast-body">
          ${n.message || ''}
          ${n.meta?.goto ? `<div class="mt-2"><a class="btn btn-sm btn-primary" href="${n.meta.goto}">‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏π</a></div>` : ''}
        </div>
      `;
      toastZone.appendChild(wrap);
      const t = new bootstrap.Toast(wrap);
      t.show();
    }

    // ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
    async function fetchNotifs({showToast=true} = {}){
      try {
        const url = new URL('/api/notifications', window.location.origin);
        if (lastFetchedAt) url.searchParams.set('since', lastFetchedAt);
        const res = await fetch(url, { credentials:'same-origin' });
        if (!res.ok) return;
        const data = await res.json(); // { items: [...], now: iso }
        lastFetchedAt = data.now || new Date().toISOString();

        // ‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà (prepend)
        (data.items || []).forEach(n => {
          // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô list ‡∏Ñ‡πà‡∏≠‡∏¢‡πÉ‡∏™‡πà
          if (!notifListEl.querySelector(`[data-id="${n.id}"]`)) {
            const el = renderItem(n);
            notifListEl.prepend(el);
            if (!n.read_at && showToast && document.visibilityState === 'visible') {
              pushToast(n);
            }
          }
        });

        updateBadge();
      } catch (e) { console.error('fetchNotifs error', e); }
    }

    // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
    async function markRead(ids){
      try{
        await fetch('/api/notifications/mark-read', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          credentials:'same-origin',
          body: JSON.stringify({ ids })
        });
      }catch(e){ console.error('markRead error', e); }
    }

    // ‡∏õ‡∏∏‡πà‡∏° "‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"
    document.getElementById('btnMarkAll').addEventListener('click', async () => {
      const unreadEls = notifListEl.querySelectorAll('.notif-unread');
      const ids = [...unreadEls].map(el => el.dataset.id);
      if (ids.length === 0) return;
      await markRead(ids);
      unreadEls.forEach(el => el.classList.remove('notif-unread'));
      updateBadge();
    });

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 20 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
    (async function init(){
      // ‡∏î‡∏∂‡∏á‡∏•‡πá‡∏≠‡∏ï‡πÅ‡∏£‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ since ‡πÄ‡∏û‡∏∑‡πà‡∏≠ initial list
      try {
        const res = await fetch('/api/notifications?limit=20', { credentials:'same-origin' });
        if (res.ok){
          const data = await res.json();
          notifListEl.innerHTML = '';
          (data.items || []).forEach(n => notifListEl.appendChild(renderItem(n)));
          lastFetchedAt = data.now || new Date().toISOString();
          updateBadge();
        }
      } catch(e){ console.error(e); }

      // Poll ‡∏ó‡∏∏‡∏Å 20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÄ‡∏ö‡∏≤‡πÜ) ‡πÅ‡∏•‡∏∞‡∏´‡∏¢‡∏∏‡∏î toast ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÇ‡∏ü‡∏Å‡∏±‡∏™
      setInterval(() => fetchNotifs({showToast:true}), 5000);

      // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î offcanvas ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ß‡∏£‡πå
      offcanvasEl.addEventListener('show.bs.offcanvas', () => fetchNotifs({showToast:false}));
    })();
  </script>
</body>
</html>
